<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <linearGradient id="bgGrad8" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="embedGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="searchGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hitGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2ecc71;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#27ae60;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="missGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2ecc71"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="url(#bgGrad8)"/>

  <!-- Title -->
  <text x="400" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#ffffff" text-anchor="middle">ğŸ”® SEMANTIC CACHE FLOW</text>

  <!-- Input query box -->
  <rect x="50" y="70" width="300" height="50" rx="10" fill="#2d2d44" stroke="#f39c12" stroke-width="2"/>
  <text x="200" y="92" font-family="Arial, sans-serif" font-size="11" fill="#f39c12" text-anchor="middle">ğŸ“¥ RequÃªte entrante</text>
  <text x="200" y="110" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">"Comment lister les fichiers ?"</text>

  <!-- Arrow down -->
  <path d="M 200 125 L 200 155" stroke="#f39c12" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- Embedding box -->
  <rect x="100" y="160" width="200" height="70" rx="10" fill="url(#embedGrad)"/>
  <text x="200" y="185" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">ğŸ§® Calcul Embedding</text>
  <text x="200" y="205" font-family="Arial, sans-serif" font-size="9" fill="#e1bee7" text-anchor="middle">[0.23, -0.45, 0.12, ...]</text>
  <text x="200" y="220" font-family="Arial, sans-serif" font-size="8" fill="#cccccc" text-anchor="middle">(vecteur 1536 dimensions)</text>

  <!-- Arrow down -->
  <path d="M 200 235 L 200 265" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- Search box -->
  <rect x="100" y="270" width="200" height="60" rx="10" fill="url(#searchGrad)"/>
  <text x="200" y="295" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">ğŸ” Recherche Cache</text>
  <text x="200" y="315" font-family="Arial, sans-serif" font-size="10" fill="#bbdefb" text-anchor="middle">SimilaritÃ© cosine > 0.92 ?</text>

  <!-- Decision diamond -->
  <polygon points="200,340 260,380 200,420 140,380" fill="#2d2d44" stroke="#3498db" stroke-width="2"/>
  <text x="200" y="385" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">Match?</text>

  <!-- Left branch - CACHE HIT -->
  <path d="M 140 380 L 60 380" stroke="#2ecc71" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="100" y="370" font-family="Arial, sans-serif" font-size="9" fill="#2ecc71" text-anchor="middle">OUI</text>

  <rect x="20" y="400" width="160" height="80" rx="10" fill="url(#hitGrad)"/>
  <text x="100" y="425" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">âœ… CACHE HIT</text>
  <text x="100" y="445" font-family="Arial, sans-serif" font-size="9" fill="#ffffff" text-anchor="middle">SimilaritÃ©: 0.94</text>
  <text x="100" y="465" font-family="Arial, sans-serif" font-size="9" fill="#ffffff" text-anchor="middle">ğŸ“¤ Retourner rÃ©ponse</text>

  <!-- Right branch - CACHE MISS -->
  <path d="M 260 380 L 340 380" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="300" y="370" font-family="Arial, sans-serif" font-size="9" fill="#e74c3c" text-anchor="middle">NON</text>

  <rect x="350" y="340" width="160" height="80" rx="10" fill="url(#missGrad)"/>
  <text x="430" y="365" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">âŒ CACHE MISS</text>
  <text x="430" y="385" font-family="Arial, sans-serif" font-size="9" fill="#ffffff" text-anchor="middle">ğŸ¤– Appeler LLM</text>
  <text x="430" y="405" font-family="Arial, sans-serif" font-size="9" fill="#ffffff" text-anchor="middle">ğŸ’¾ Cacher rÃ©ponse</text>

  <!-- Match example box -->
  <rect x="500" y="70" width="280" height="100" rx="10" fill="#2d2d44" stroke="#2ecc71" stroke-width="2"/>
  <text x="640" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2ecc71" text-anchor="middle">ğŸ¯ Exemple de Match</text>
  <text x="520" y="120" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">RequÃªte cache:</text>
  <text x="520" y="138" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">"ls ou dir pour lister"</text>
  <text x="520" y="158" font-family="Arial, sans-serif" font-size="10" fill="#2ecc71">â†’ SimilaritÃ©: 0.94 âœ“</text>

  <!-- Cosine formula box -->
  <rect x="500" y="190" width="280" height="120" rx="10" fill="#2d2d44" stroke="#9b59b6" stroke-width="2"/>
  <text x="640" y="215" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9b59b6" text-anchor="middle">ğŸ“ SimilaritÃ© Cosine</text>
  <text x="640" y="250" font-family="monospace" font-size="12" fill="#ffffff" text-anchor="middle">cos(Î¸) = AÂ·B / (||A||Ã—||B||)</text>
  <text x="520" y="280" font-family="Arial, sans-serif" font-size="9" fill="#cccccc">â€¢ cos = 1.0 : Identiques</text>
  <text x="520" y="295" font-family="Arial, sans-serif" font-size="9" fill="#cccccc">â€¢ cos = 0.0 : Aucune relation</text>

  <!-- Stats box -->
  <rect x="500" y="330" width="280" height="90" rx="10" fill="#1e3a1e" stroke="#2ecc71" stroke-width="2"/>
  <text x="640" y="355" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2ecc71" text-anchor="middle">ğŸ“Š RÃ©sultats Typiques</text>
  <text x="520" y="380" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">â€¢ Hit Rate: 68%</text>
  <text x="520" y="398" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">â€¢ Ã‰conomies: 66% des coÃ»ts API</text>
  <text x="520" y="416" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">â€¢ Seuil optimal: 0.92</text>
</svg>
