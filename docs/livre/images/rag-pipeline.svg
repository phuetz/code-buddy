<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 380">
  <defs>
    <linearGradient id="bgGradRP" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="800" height="380" fill="url(#bgGradRP)"/>

  <!-- Title -->
  <text x="400" y="28" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#3498db" text-anchor="middle">ğŸ“š RAG PIPELINE</text>

  <!-- Main container -->
  <rect x="40" y="50" width="720" height="315" rx="8" fill="#2d2d44" stroke="#3498db"/>

  <!-- Query input -->
  <text x="70" y="80" font-family="Arial, sans-serif" font-size="11" fill="#cccccc">Query</text>
  <line x1="90" y1="85" x2="90" y2="100" stroke="#4a4a6a" stroke-width="2"/>

  <!-- Step 1: Cache Check -->
  <rect x="70" y="105" width="660" height="60" rx="6" fill="#2a1e3a" stroke="#9b59b6"/>
  <text x="100" y="130" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#9b59b6">ğŸ” Cache Check (Semantic)</text>
  <text x="100" y="150" font-family="monospace" font-size="10" fill="#cccccc">cosine similarity &gt; 0.92 â†’ cache hit</text>
  
  <text x="670" y="140" font-family="Arial, sans-serif" font-size="10" fill="#2ecc71">hit âœ“</text>
  <line x1="90" y1="165" x2="90" y2="180" stroke="#e74c3c" stroke-width="2"/>
  <text x="100" y="178" font-family="Arial, sans-serif" font-size="9" fill="#e74c3c">miss</text>

  <!-- Step 2: Retrieval -->
  <rect x="70" y="190" width="660" height="70" rx="6" fill="#1e2a3a" stroke="#3498db"/>
  <text x="100" y="215" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3498db">ğŸ“– Retrieval (Dependency-Aware)</text>
  <text x="100" y="235" font-family="monospace" font-size="9" fill="#cccccc">â€¢ Embedding search</text>
  <text x="280" y="235" font-family="monospace" font-size="9" fill="#cccccc">â€¢ Import expansion</text>
  <text x="480" y="235" font-family="monospace" font-size="9" fill="#cccccc">â€¢ Caller context</text>

  <line x1="90" y1="260" x2="90" y2="275" stroke="#4a4a6a" stroke-width="2"/>

  <!-- Step 3: Compression -->
  <rect x="70" y="280" width="660" height="60" rx="6" fill="#1e3a3a" stroke="#2ecc71"/>
  <text x="100" y="305" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2ecc71">ğŸ—œï¸ Compression</text>
  <text x="100" y="325" font-family="monospace" font-size="9" fill="#cccccc">â€¢ Priority-based retention</text>
  <text x="360" y="325" font-family="monospace" font-size="9" fill="#cccccc">â€¢ Target: 4000 tokens</text>

  <!-- Output -->
  <line x1="90" y1="340" x2="90" y2="355" stroke="#2ecc71" stroke-width="2"/>
  <text x="100" y="358" font-family="Arial, sans-serif" font-size="11" fill="#2ecc71">Context Enrichi</text>
</svg>
